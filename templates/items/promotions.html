
{% extends "base.html" %}
{% block content %}

<div class="container-fluid">

<h4 class="mb-3">Promotion</h4>

<div class="card shadow-sm">
<div class="card-body">

<a href="{% url 'promotion_add' %}" class="btn btn-primary mb-3">
Add new Promotion
</a>

<table class="table table-bordered table-hover">
<thead class="table-light">
<tr>
<th>ID</th>
<th>Name</th>
<th>PromoCode</th>
<th>Priority</th>
<th>Valid From</th>
<th>Valid To</th>
<th>Discount</th>
<th>Application</th>
<th width="160">Action</th>
</tr>
</thead>

<tbody>
{% for p in promos %}
<tr>
<td>{{ p.id }}</td>
<td>{{ p.name }}</td>
<td>{{ p.promo_code }}</td>
<td>{{ p.priority }}</td>
<td>{{ p.from_date }}</td>
<td>{{ p.to_date }}</td>
<td>{{ p.discount_value }}</td>
<td>{{ p.application }}</td>

<td>
<a href="{% url 'promotion_edit' p.id %}" class="btn btn-warning btn-sm">Edit</a>

<button class="btn btn-danger btn-sm"
onclick="deletePromo({{ p.id }}, '{{ p.name }}')">
Delete
</button>
</td>
</tr>
{% empty %}
<tr>
<td colspan="9" class="text-center">No promotions added</td>
</tr>
{% endfor %}
</tbody>
</table>

</div>
</div>
</div>

<script>
function deletePromo(id,name){
if(confirm("Delete promotion: "+name+" ?")){
window.location.href="/items/promotions/delete/"+id+"/";
}
}
</script>

{% endblock %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/barcode.css' %}">
{% endblock %}

{% block content %}

<div class="no-print">
    <button onclick="window.print()" class="btn btn-primary">
        Print Labels
    </button>
</div>

<div id="print-area" class="barcode-container">

{% for product in items %}

<div class="label">

    <div class="store">
        {{ store_name }}
    </div>

    <div class="price">
        Rs {{ product.price }}
    </div>

    <div class="barcode">
        <svg class="barcode-svg"
             data-sku="{{ product.sku }}"></svg>
    </div>

    <div class="name">
        {{ product.name }}
    </div>

    <div class="sku">
        {{ product.sku }}
    </div>

</div>

{% endfor %}

</div>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function(){

    document.querySelectorAll(".barcode-svg").forEach(function(el){

        JsBarcode(el, el.dataset.sku, {
            format: "CODE128",
            width: 2,
            height: 60,
            displayValue: true,
            fontSize: 14,
            margin: 0
        });

    });

    // âœ… AUTO PRINT POPUP
    setTimeout(function(){
        window.print();
    }, 500);

});
</script>

{% endblock %}

{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="card shadow-sm">
  <div class="card-body">

    <!-- HEADER -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="text-success mb-0">Sale History</h5>

      <div>
        <button class="btn btn-sm btn-outline-success">Excel</button>
        <button class="btn btn-sm btn-outline-danger">PDF</button>
        <button class="btn btn-sm btn-outline-primary">CSV</button>
      </div>
    </div>

    <!-- SEARCH -->
    <div class="mb-3 text-end">
      <input type="text" class="form-control w-25 d-inline" placeholder="Search">
    </div>

    <!-- TABLE -->
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-light">
          <tr>
            <th>Date</th>
            <th>Bill No</th>
            <th>Sold By</th>
            <th>Customer</th>
            <th>Sale Total</th>
            <th>Discount</th>
            <th>Net Amount</th>
            <th>Payment Mode</th>
            <th>Detail</th>
            <th>Offline Bill</th>
            <th>Delete</th>
          </tr>
        </thead>

        <tbody>
          {% for sale in sales %}
          <tr>
            <td>{{ sale.created_at|date:"Y-m-d H:i" }}</td>
            <td>{{ sale.order_id }}</td>
            <td>{{ request.user.username }}</td>
            <td>{{ sale.customer.name|default:"Walk-in" }}</td>
            <td>PKR {{ sale.total|floatformat:2 }}</td>
            <td>PKR {{ sale.discount|default:"0.00" }}</td>
            <td>PKR {{ sale.total|floatformat:2 }}</td>
            <td>{{ sale.payment_method|title }}</td>

            <td>
              <a href="#" class="btn btn-sm btn-primary">
                <i class="bi bi-file-text"></i> Detail
              </a>
            </td>

            <td>{{ sale.order_id }}</td>

            <td>
              <button class="btn btn-sm btn-danger">
                <i class="bi bi-trash"></i> Delete
              </button>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="11" class="text-center text-muted">
              No sales found
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>
{% endblock %}
